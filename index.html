

<div style="width:1000px;height:400px">
    <canvas id="dailyTotalsChart"></canvas>
</div>
<div style="width:1000px;height:400px"></div>

<div style="width:1000px;height:400px">
    <canvas id="deltaChart" ></canvas>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.2.1/chart.min.js"></script>
<script src="jquery-3.6.0.min.js"></script>


<script>
$(function () {
    var ctx = document.getElementById("dailyTotalsChart").getContext("2d");
    var json_url = "https://vax-service-kjw7fxzzca-df.a.run.app/api/data";

    var dailyTotalsChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: [],
            datasets: [
                {
                  label: 'First shot',
                  data: [],
                  backgroundColor: "rgba(75,192,192,0.4)",
                },
                {
                  label: 'Second shot',
                  data: [],
                  backgroundColor: "rgba(75,22,192,0.4)",
                }
            ]
        },
        options: {
            tooltips: {
                mode: 'index',
                intersect: false
            },
            scales: {
              x: {
                stacked: true,
              },
              y: {
                stacked: true
              }
            }
        }
    });

    ajax_chart(dailyTotalsChart, json_url);

    // function to update our chart
    function ajax_chart(chart, url, data) {
        var data = data || {};

        $.getJSON(url, data).done(function(response) {
            chart.data.labels = response.dates;
            chart.data.datasets[0].data = response.firsts;
            chart.data.datasets[1].data = response.seconds;

            chart.update();
        });
    }
});
</script>



<script>
$(function () {
    var ctx = document.getElementById("deltaChart").getContext("2d");
    var json_url = "https://vax-service-kjw7fxzzca-df.a.run.app/api/delta";

    var deltaChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: [],
            datasets: [
                {
                  label: 'First shot',
                  data: [],
                  borderColor: "#3e95cd",
                },
                {
                  label: 'Second shot',
                  data: [],
                  borderColor: "#3cba9f",
                },
                {
                  label: 'Total',
                  data: [],
                  borderColor: "#c45850",
                }
            ]
        },
        options: {
            tooltips: {
                mode: 'index',
                intersect: false
            }
        }
    });

    ajax_chart(deltaChart, json_url);

    // function to update our chart
    function ajax_chart(chart, url, data) {
        var data = data || {};

        $.getJSON(url, data).done(function(response) {
            chart.data.labels = response.dates;
            chart.data.datasets[0].data = response.firsts;
            chart.data.datasets[1].data = response.seconds;
            chart.data.datasets[2].data = response.totals;

            chart.update(); // finally update our chart
        });
    }
});
</script>